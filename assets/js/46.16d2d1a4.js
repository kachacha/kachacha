(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{255:function(t,s,a){"use strict";a.r(s);var n=a(2),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("div",{staticClass:"custom-block tip"},[a("p",[t._v("前言：刚开始接触cron表达式肯定会由衷感慨，者TM是什么东西，好神奇😂 ；深究后会发现真的好有意思。")]),t._v(" "),a("blockquote",[a("p",[t._v("文档参考链接："),a("a",{attrs:{href:"https://www.cnblogs.com/dyppp/p/7498457.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.cnblogs.com/dyppp/p/7498457.html"),a("OutboundLink")],1)])])]),t._v(" "),a("blockquote",[a("p",[t._v("@Calendar Phrases: "),a("em",[a("strong",[t._v("脚踏铁基，繁星略去！")])])])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://img.shields.io/badge/%E4%BD%9C%E8%80%85-ZF-brightgreen",alt:"作者"}}),t._v(" "),a("img",{attrs:{src:"https://img.shields.io/badge/@time-2020.01.03-orange",alt:"@time"}})]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"前言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[t._v("#")]),t._v(" 前言")]),t._v(" "),a("blockquote",[a("p",[t._v("Cron表达式是一个字符串，字符串以5或6个空格隔开，分为6或7个域，每一个域代表一个含义。")])]),t._v(" "),a("h2",{attrs:{id:"域"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#域"}},[t._v("#")]),t._v(" 域")]),t._v(" "),a("ol",[a("li",[t._v("Seconds Minutes Hours DayofMonth Month DayofWeek Year")]),t._v(" "),a("li",[t._v("Seconds Minutes Hours DayofMonth Month DayofWeek")])]),t._v(" "),a("p",[a("strong",[t._v("每一个域可出现的字符如下")]),t._v("：")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("Seconds")]),t._v(': 可出现", - * /"四个字符，有效范围为0-59的整数')]),t._v(" "),a("li",[a("code",[t._v("Minutes")]),t._v(': 可出现", - * /"四个字符，有效范围为0-59的整数')]),t._v(" "),a("li",[a("code",[t._v("Hours")]),t._v(': 可出现", - * /"四个字符，有效范围为0-23的整数')]),t._v(" "),a("li",[a("code",[t._v("DayofMonth")]),t._v(':可出现", - * / ? L W C"八个字符，有效范围为0-31的整数')]),t._v(" "),a("li",[a("code",[t._v("Month")]),t._v(': 可出现", - * /"四个字符，有效范围为1-12的整数或JAN-DEc')]),t._v(" "),a("li",[a("code",[t._v("DayofWeek")]),t._v(': 可出现", - * / ? L C #"四个字符，有效范围为1-7的整数或SUN-SAT两个范围。1表示星期天，2表示星期一， 依次类推')]),t._v(" "),a("li",[a("code",[t._v("Year")]),t._v(': 可出现", - * /"四个字符，有效范围为1970-2099年')])]),t._v(" "),a("h4",{attrs:{id:"含义详解"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#含义详解"}},[t._v("#")]),t._v(" 含义详解")]),t._v(" "),a("p",[t._v("每一个域都使用数字，但还可以出现如下特殊字符，它们的含义是：")]),t._v(" "),a("p",[t._v("(1) "),a("em",[t._v("：表示匹配该域的任意值，假如在Minutes域使用")]),t._v(", 即表示每分钟都会触发事件。")]),t._v(" "),a("p",[t._v("(2) ?：只能用在DayofMonth和DayofWeek两个域。它也匹配域的任意值，但实际不会。因为DayofMonth和 DayofWeek会相互影响。例如想在每月的20日触发调度，不管20日到底是星期几，则只能使用如下写法： 13 13 15 20 * ?, 其中最后一位只能用？，而不能使用*，如果使用*表示不管星期几都会触发，实际上并不是这样。")]),t._v(" "),a("p",[t._v("(3) -：表示范围，例如在Minutes域使用5-20，表示从5分到20分钟每分钟触发一次")]),t._v(" "),a("p",[t._v("(4) /：表示起始时间开始触发，然后每隔固定时间触发一次，例如在Minutes域使用5/20,则意味着5分钟触发一次，而25，45等分别触发一次.")]),t._v(" "),a("p",[t._v("(5) ,：表示列出枚举值值。例如：在Minutes域使用5,20，则意味着在5和20分每分钟触发一次。")]),t._v(" "),a("p",[t._v("(6) L：表示最后，只能出现在DayofWeek和DayofMonth域，如果在DayofWeek域使用5L,意味着在最后的一个星期四触发。")]),t._v(" "),a("p",[t._v("(7) W：表示有效工作日(周一到周五),只能出现在DayofMonth域，系统将在离指定日期的最近的有效工作日触发事件。例如：在 DayofMonth使用5W，如果5日是星期六，则将在最近的工作日：星期五，即4日触发。如果5日是星期天，则在6日(周一)触发；如果5日在星期一 到星期五中的一天，则就在5日触发。另外一点，W的最近寻找不会跨过月份。")]),t._v(" "),a("p",[t._v("(8) LW：这两个字符可以连用，表示在某个月最后一个工作日，即最后一个星期五。")]),t._v(" "),a("p",[t._v("(9) #：用于确定每个月第几个星期几，只能出现在DayofMonth域。例如在4#2，表示某月的第二个星期三。")]),t._v(" "),a("h2",{attrs:{id:"举例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#举例"}},[t._v("#")]),t._v(" 举例")]),t._v(" "),a("ol",[a("li",[a("p",[t._v('每隔5秒执行一次："*/5 * * * * ?"')])]),t._v(" "),a("li",[a("p",[t._v('每隔1分钟执行一次："0 */1 * * * ?"')])]),t._v(" "),a("li",[a("p",[t._v('每天23点执行一次："0 0 23 * * ?"')])]),t._v(" "),a("li",[a("p",[t._v('每天凌晨1点执行一次："0 0 1 * * ?"')])]),t._v(" "),a("li",[a("p",[t._v('每月1号凌晨1点执行一次："0 0 1 1 * ?"')])]),t._v(" "),a("li",[a("p",[t._v('每月最后一天23点执行一次："0 0 23 L * ?"')])]),t._v(" "),a("li",[a("p",[t._v('每周星期天凌晨1点实行一次："0 0 1 ? * L"')])]),t._v(" "),a("li",[a("p",[t._v('在26分、29分、33分执行一次："0 26,29,33 * * * ?"')])]),t._v(" "),a("li",[a("p",[t._v('每天的0点、13点、18点、21点都执行一次："0 0 0,13,18,21 * * ?"')])]),t._v(" "),a("li",[a("p",[t._v('表示在每月的1日的凌晨2点调度任务："0 0 2 1 * ? *"')])]),t._v(" "),a("li",[a("p",[t._v('表示周一到周五每天上午10：15执行作业："0 15 10 ? * MON-FRI"')])]),t._v(" "),a("li",[a("p",[t._v('表示2002-2006年的每个月的最后一个星期五上午10:15执行："0 15 10 ? 6L 2002-2006"')])])]),t._v(" "),a("blockquote",[a("p",[t._v("注意："),a("strong",[a("em",[t._v('由于"月份中的日期"和"星期中的日期"这两个元素互斥的,必须要对其中一个设置?')])])])]),t._v(" "),a("h2",{attrs:{id:"java-使用举例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#java-使用举例"}},[t._v("#")]),t._v(" Java 使用举例")]),t._v(" "),a("p",[t._v("通过@Scheduled cron可以执行定时任务，而想要在服务启动时就先执行一次代码")]),t._v(" "),a("p",[t._v("可以通过 implements InitializingBean 重写 afterPropertiesSet 方法来调用一遍定时任务的方法来达到启动服务时执行一遍工作的效果")]),t._v(" "),a("div",{staticClass:"language-JAVA line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FuncReportScheduled")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InitializingBean")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * 每月月初执行一次\n     */")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Scheduled")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cron"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0 0 0 1 * ?"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Transactional")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("funcReportInit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        log"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("info")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"---------------- 定时任务 ----------------"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("afterPropertiesSet")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("funcReportInit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br")])])])}),[],!1,null,null,null);s.default=e.exports}}]);