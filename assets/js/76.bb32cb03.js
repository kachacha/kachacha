(window.webpackJsonp=window.webpackJsonp||[]).push([[76],{199:function(s,a,t){"use strict";t.r(a);var e=t(2),r=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("div",{staticClass:"custom-block tip"},[t("p",[s._v("前言： 相信对一些网络搬运工来说，当将爬虫编写到一定数量后；必然需要一个系统化的，较简单便于管理的系统对其管理和运行；此文章根据开源项目 ScrapyWeb 对 Scrapy 的集群点 Scrapyd 进行管理；可以做到："),t("em",[s._v("界面化管理")]),s._v("、"),t("em",[s._v("定时运行爬虫")]),s._v("、"),t("em",[s._v("版本管理")]),s._v("、"),t("em",[s._v("便捷日志查看")]),s._v("、"),t("em",[s._v("分布式爬取数据")]),s._v("等。\n虽然东西不算太多，但好事遇到了一些坑的。😂")]),s._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://scrapyd.readthedocs.io/en/stable/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Scrapyd官解"),t("OutboundLink")],1)])])]),s._v(" "),t("blockquote",[t("p",[s._v("@Calendar Phrases: "),t("em",[t("strong",[s._v("表面毫无波澜、内心风起云涌！")])])])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://img.shields.io/badge/%E4%BD%9C%E8%80%85-ZF-brightgreen",alt:"作者"}}),s._v(" "),t("img",{attrs:{src:"https://img.shields.io/badge/@time-2020.01.08-orange",alt:"@time"}})]),s._v(" "),t("hr"),s._v(" "),t("h2",{attrs:{id:"前言"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[s._v("#")]),s._v(" 前言")]),s._v(" "),t("blockquote",[t("p",[s._v("前言：相信对一些网络搬运工来说，当将爬虫编写到一定数量后；必然需要一个系统化的，较简单便于管理的系统对其管理和运行；此文章根据开源项目 ScrapyWeb 对 Scrapy 的集群点 Scrapyd 进行管理；可以做到："),t("em",[s._v("界面化管理")]),s._v("、"),t("em",[s._v("定时运行爬虫")]),s._v("、"),t("em",[s._v("版本管理")]),s._v("、"),t("em",[s._v("便捷日志查看")]),s._v("、"),t("em",[s._v("分布式爬取数据")]),s._v("等。")])]),s._v(" "),t("h2",{attrs:{id:"概述"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#概述"}},[s._v("#")]),s._v(" 概述")]),s._v(" "),t("p",[s._v("Scrapyd是一款用于管理scrapy爬虫的部署和运行的服务，提供了HTTP JSON形式的API来完成爬虫调度涉及的各项指令。")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://scrapyd.readthedocs.io/en/stable/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Scrapyd官解"),t("OutboundLink")],1)]),s._v(" "),t("p",[s._v("***注意：***Scrapyd只是给每一个Scrapy提供一个运行的平台，本质与一个Scrapy在本地运行启动几乎没有差别。到ScrapyWeb上配置时增加界面化管理")]),s._v(" "),t("h2",{attrs:{id:"环境搭建"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#环境搭建"}},[s._v("#")]),s._v(" 环境搭建")]),s._v(" "),t("blockquote",[t("p",[s._v("本人只测试了 Windows 10 情况下的所有环境搭建，这里注意所有库都***需要指定版本***；因为各包之间都有版本对应，否则会爆各种你意想不到的异常；至于对应表除了这里的一套，其它的可以自己尝试或自己上网查。")])]),s._v(" "),t("ul",[t("li",[t("p",[s._v("Python版本：3.6")])]),s._v(" "),t("li",[t("p",[s._v("系统环境：Windows 10 / Linux / ubuntu")])]),s._v(" "),t("li",[t("p",[s._v("Python库安装：")])])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("pip3 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("scrapyd")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.2")]),s._v(".0\npip3 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" scrapyd-client"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.1")]),s._v(".0\npip3 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("twisted")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("18.9")]),s._v(".0\npip3 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("logparser")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.8")]),s._v(".2\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("***注意：***Windows 10 环境需要（加）装以下库：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("pip3 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("pypiwin32")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("223")]),s._v("\npip3 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" scrapyd-client"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.2")]),s._v(".0a1\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("ul",[t("li",[s._v("下载或"),t("code",[s._v("pip")]),s._v("安装"),t("code",[s._v("ScrapydWeb")]),s._v("库（建议下载源码，便于修改）")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("pip3 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("scrapydweb")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.4")]),s._v(".0\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("源码地址："),t("a",{attrs:{href:"https://github.com/my8100/scrapydweb",target:"_blank",rel:"noopener noreferrer"}},[s._v("点这里"),t("OutboundLink")],1)]),s._v(" "),t("h2",{attrs:{id:"配置修改"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置修改"}},[s._v("#")]),s._v(" 配置修改")]),s._v(" "),t("h3",{attrs:{id:"一、scrapyd的配置修改"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一、scrapyd的配置修改"}},[s._v("#")]),s._v(" 一、Scrapyd的配置修改")]),s._v(" "),t("blockquote",[t("p",[s._v("Scrapyd读取配置文件的顺序为：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("/etc/scrapyd/scrapyd.conf\n~/etc/scrapyd/conf.d/*\nscrapyd.conf\n~/.scrapyd.conf\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("所以我们只需要修改在目录："),t("code",[s._v("E:\\你的Python安装路径\\Python36\\Lib\\site-packages\\scrapyd")]),s._v("下的"),t("code",[s._v("default_scrapyd.conf")]),s._v("文件")])]),s._v(" "),t("h4",{attrs:{id:"①-windows-10-相关修改"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#①-windows-10-相关修改"}},[s._v("#")]),s._v(" ①. Windows 10 相关修改")]),s._v(" "),t("p",[s._v("此处一般使用只需要修改以下"),t("code",[s._v("eggs_dir")]),s._v("和"),t("code",[s._v("logs_dir")]),s._v("的路径，其它配置详解如下：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("scrapyd"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 网页和Json服务监听的IP地址，默认为127.0.0.1")]),s._v("\nbind_address "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 监听的端口，默认为6800")]),s._v("\nhttp_port   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6800")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 是否打开debug模式，默认为off")]),s._v("\ndebug       "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" off\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 每个CPU可启用的Scrapy 进程数，默认为4")]),s._v("\nmax_proc_per_cpu "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 可启用的最多进程数，默认为0.如果未设置或者设为0，则使用的最多进程数=CPU数量*max_proc_per_cpu")]),s._v("\nmax_proc "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 项目eggs生成目录，默认为项目目录下eggs")]),s._v("\neggs_dir    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" eggs\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 项目日志生成目录，默认为项目目录下logs，如果不想要生成日志，可以直接设置成空")]),s._v("\nlogs_dir    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" logs\nitems_dir   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 项目dbs生成目录，默认为项目目录下dbs")]),s._v("\ndbs_dir     "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" dbs\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 爬取的items存储的文件夹（版本0.15.以上），默认为空，不存储。")]),s._v("\nitems_dir "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 每个爬虫保持的完成任务数，默认为5.（版本0.15.以上，以前版本中为logs_to_keep）")]),s._v("\njobs_to_keep "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 保持的完成任务进程数。默认为100.（版本0.14.以上）")]),s._v("\nfinished_to_keep "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 轮训请求队列的时间间隔。默认为5s，可以为浮点数")]),s._v("\npoll_interval "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动子进程的模块。可以使用自定义")]),s._v("\nrunner      "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" scrapyd.runner\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 返回可用于twisted的application，可继承于Scrapyd添加和移除自己的组件和服务。 https://twistedmatrix.com/documents/current/core/howto/application.html查看更多")]),s._v("\napplication "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" scrapyd.app.application\nlauncher    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" scrapyd.launcher.Launcher\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# twisted的web资源，表示到scrapyd的接口。Scrapyd包含一个带有网站的界面，可以提供对应用程序的web资源的简单监视和访问。此设置必须提供twisted web资源的根类。")]),s._v("\nwebroot     "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" scrapyd.website.Root\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br")])]),t("h4",{attrs:{id:"②-linux-or-ubuntu-相关修改"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#②-linux-or-ubuntu-相关修改"}},[s._v("#")]),s._v(" ②. Linux or ubuntu 相关修改")]),s._v(" "),t("ul",[t("li",[s._v("增加 scrapyd 文件读取权限")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" +x scrapyd\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("增加到开机启动")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chkconfig")]),s._v(" scrapyd on \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h4",{attrs:{id:"③-scrapydweb-相关配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#③-scrapydweb-相关配置"}},[s._v("#")]),s._v(" ③. ScrapydWeb 相关配置")]),s._v(" "),t("ul",[t("li",[s._v("scrapydweb -> default_settings.py |  scrapydweb_settings_v8-9-10.py 修改")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Check out this link to find out where the Scrapy logs are stored:")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# https://scrapyd.readthedocs.io/en/stable/config.html#logs-dir")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# e.g. 'C:/Users/username/logs/' or '/home/username/logs/'")]),s._v("\nSCRAPYD_LOGS_DIR "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'你的Scrapyd日志存放路径，默认：C:/Users/username/logs/'")]),s._v("\n------\n------\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("############################## LogParser ######################################")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# By default ScrapydWeb would automatically run LogParser as a subprocess at startup,")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# so that the stats of crawled_pages and scraped_items can be shown in the Jobs page.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# The default is True, set it to False to disable this behaviour.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Note that you can run the LogParser service separately via command 'logparser' as you like.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Run 'logparser -h' to find out the config file of LogParser for more advanced settings.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Visit https://github.com/my8100/logparser for more info.")]),s._v("\nENABLE_LOGPARSER "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" True  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这里改为 True")]),s._v("\n\n------\n------\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# - the string format: username:password@ip:port#group")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   - The default port would be 6800 if not provided,")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   - Both basic auth and group are optional.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   - e.g. '127.0.0.1:6800' or 'username:password@localhost:6801#group'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# - the tuple format: (username, password, ip, port, group)")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   - When the username, password, or group is too complicated (e.g. contains ':@#'),")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   - or if ScrapydWeb fails to parse the string format passed in,")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   - it's recommended to pass in a tuple of 5 elements.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   - e.g. ('', '', '127.0.0.1', '6800', '') or ('username', 'password', 'localhost', '6801', 'group')")]),s._v("\nSCRAPYD_SERVERS "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'localhost:6800'")]),s._v(",  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这里增加你的 Scrapyd 集群地址")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 'username:password@localhost:6801#group',")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ('username', 'password', 'localhost', '6801', 'group'),")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br")])]),t("ul",[t("li",[s._v("持久化配置")])]),s._v(" "),t("blockquote",[t("p",[s._v("持久化配置，顾名思义就是如果此 ScrapydWeb 服务重启后，其 Scrapyd 中配置，日志，启动的爬虫等等；是否还存在，不存在是否自动重新配置启动等。")])]),s._v(" "),t("p",[s._v("。。。。。。")]),s._v(" "),t("h2",{attrs:{id:"启动并运行"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动并运行"}},[s._v("#")]),s._v(" 启动并运行")]),s._v(" "),t("h4",{attrs:{id:"第一步：启动-scrapyd"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#第一步：启动-scrapyd"}},[s._v("#")]),s._v(" 第一步：启动 Scrapyd")]),s._v(" "),t("ul",[t("li",[s._v("如果是 Windows 系统，则打开 cmd 运行 "),t("code",[s._v("scrapyd")]),s._v("命令。")]),s._v(" "),t("li",[s._v("如果是 Linux | ubuntu 系统，则打开 Terminal 运行 "),t("code",[s._v("scrapyd")]),s._v("命令。")])]),s._v(" "),t("h4",{attrs:{id:"第二步：（some-time）启动-logparser"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#第二步：（some-time）启动-logparser"}},[s._v("#")]),s._v(" 第二步：（Some Time）启动 "),t("code",[s._v("logparser")])]),s._v(" "),t("ul",[t("li",[s._v("如果是 Windows 系统，则打开 cmd 运行 "),t("code",[s._v("logparser")]),s._v("命令。")]),s._v(" "),t("li",[s._v("如果是 Linux | ubuntu 系统，则打开 Terminal 运行 "),t("code",[s._v("logparser")]),s._v("命令。")])]),s._v(" "),t("h4",{attrs:{id:"第三步：启动-scrapyweb"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#第三步：启动-scrapyweb"}},[s._v("#")]),s._v(" 第三步：启动 ScrapyWeb")]),s._v(" "),t("ul",[t("li",[s._v("运行项目内："),t("code",[s._v("scrapydweb")]),s._v(" -> "),t("code",[s._v("run.py")]),s._v(" 文件（可能需要启动两次）。")])]),s._v(" "),t("p",[t("em",[t("strong",[s._v("最终")])]),s._v("：你会得到以下这样的一个界面：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/kachacha/markdownPicture/docImg/20200107200057.png",alt:"",title:"ScrapydWeb UI"}})]),s._v(" "),t("blockquote",[t("p",[s._v("具体功能就不介绍了，请参考源项目"),t("a",{attrs:{href:"https://github.com/my8100/scrapydweb/issues",target:"_blank",rel:"noopener noreferrer"}},[s._v("scrapydweb issues"),t("OutboundLink")],1),s._v("中所介绍以及自己的学习理解。")])]),s._v(" "),t("h2",{attrs:{id:"扩展"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#扩展"}},[s._v("#")]),s._v(" 扩展")]),s._v(" "),t("h3",{attrs:{id:"一、scrapyd-爬虫项目部署相关"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一、scrapyd-爬虫项目部署相关"}},[s._v("#")]),s._v(" 一、Scrapyd 爬虫项目部署相关")]),s._v(" "),t("h6",{attrs:{id:"①、对scrapy-cfg的改写"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#①、对scrapy-cfg的改写"}},[s._v("#")]),s._v(" ①、对"),t("code",[s._v("scrapy.cfg")]),s._v("的改写")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Automatically created by: scrapy startproject")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# For more information about the [deploy] section see:")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# https://scrapyd.readthedocs.io/en/latest/deploy.html")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("settings"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\ndefault "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" focusedcrawler.settings\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("deploy:produce001"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nurl "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" http://your scrapyd IP:6800/\nproject "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" focusedcrawler\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("deploy:produce002"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nurl "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" http://your scrapyd IP:6800/\nproject "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" focusedcrawler\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("deploy:produce003"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nurl "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" http://your scrapyd IP:6800/\nproject "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" focusedcrawler\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("deploy:localhost"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nurl "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" http://localhost:6800/\nproject "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" focusedcrawler\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br")])]),t("h5",{attrs:{id:"②、使用命令列输可用的部署地址："}},[t("a",{staticClass:"header-anchor",attrs:{href:"#②、使用命令列输可用的部署地址："}},[s._v("#")]),s._v(" ②、使用命令列输可用的部署地址：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("scrapy-deploy -l\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h5",{attrs:{id:"③、部署爬虫"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#③、部署爬虫"}},[s._v("#")]),s._v(" ③、部署爬虫")]),s._v(" "),t("ul",[t("li",[s._v("运行以下命令：{部署名称}、{项目名称}")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("scrapyd-deploy "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("部署名称"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" -p "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("项目名称"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h5",{attrs:{id:"④、检查部署结果"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#④、检查部署结果"}},[s._v("#")]),s._v(" ④、检查部署结果")]),s._v(" "),t("ul",[t("li",[s._v("运行以下命令，查询某项目是否部署成功：{部署名称}")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("scrapyd-deploy -L "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("部署名称"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h5",{attrs:{id:"⑤、在同路径下，按照-scrapy-cfg-自动部署"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#⑤、在同路径下，按照-scrapy-cfg-自动部署"}},[s._v("#")]),s._v(" ⑤、在同路径下，按照 scrapy.cfg 自动部署")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("scrapyd-deploy\nor\nscrapyd-deploy -a\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h3",{attrs:{id:"二、操作-scrapyd-爬虫-api-等"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二、操作-scrapyd-爬虫-api-等"}},[s._v("#")]),s._v(" 二、操作 Scrapyd 爬虫 API 等")]),s._v(" "),t("ul",[t("li",[t("h6",{attrs:{id:"调度爬虫"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#调度爬虫"}},[s._v("#")]),s._v(" 调度爬虫")])])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" http://localhost:6800/schedule.json -d "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("project")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("myproject"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" -d "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("spider")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("somespider"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 带上参数")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" http://localhost:6800/schedule.json -d "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("project")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("myproject"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" -d "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("spider")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("somespider"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" -d "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("setting")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("DOWNLOAD_DELAY"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" -d "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("arg1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("val1\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("ul",[t("li",[t("h6",{attrs:{id:"取消运行"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#取消运行"}},[s._v("#")]),s._v(" 取消运行")])])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" http://localhost:6800/cancel.json -d "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("project")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("myproject"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" -d "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("job")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("6487ec79947edab326d6db28a2d86511e8247444"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[t("h6",{attrs:{id:"列出项目"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#列出项目"}},[s._v("#")]),s._v(" 列出项目")])])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" http://localhost:6800/listprojects.json\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[t("h6",{attrs:{id:"列出版本"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#列出版本"}},[s._v("#")]),s._v(" 列出版本")])])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" http://localhost:6800/listversions.json?project"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("myproject"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[t("h6",{attrs:{id:"列出爬虫"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#列出爬虫"}},[s._v("#")]),s._v(" 列出爬虫")])])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" http://localhost:6800/listspiders.json?project"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("myproject"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[t("h6",{attrs:{id:"列出正在运行的job"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#列出正在运行的job"}},[s._v("#")]),s._v(" 列出正在运行的job")])])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" http://localhost:6800/listjobs.json?project"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("myproject"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[t("h6",{attrs:{id:"删除某版本爬虫"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#删除某版本爬虫"}},[s._v("#")]),s._v(" 删除某版本爬虫")])])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" http://localhost:6800/delversion.json -d "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("project")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("myproject"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" -d "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("version")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("r99"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[t("h6",{attrs:{id:"删除项目"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#删除项目"}},[s._v("#")]),s._v(" 删除项目")])])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" http://localhost:6800/delproject.json -d "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("project")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("myproject"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"bug-扩展"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#bug-扩展"}},[s._v("#")]),s._v(" BUG 扩展")]),s._v(" "),t("h3",{attrs:{id:"一、安装scrapyd-client后，没有scrapyd-deploy命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一、安装scrapyd-client后，没有scrapyd-deploy命令"}},[s._v("#")]),s._v(" 一、安装"),t("code",[s._v("scrapyd-client")]),s._v("后，没有"),t("code",[s._v("scrapyd-deploy")]),s._v("命令")]),s._v(" "),t("blockquote",[t("p",[s._v("问题解析： 可能由于安装的"),t("code",[s._v("scrapyd-client")]),s._v("版本有问题，不适合在 Windows 上运行的命令（Linux | ubuntu不会由这个问题），所以需要自己造一个这个命令。")])]),s._v(" "),t("p",[t("em",[t("strong",[s._v("解决方案")])]),s._v("：")]),s._v(" "),t("p",[s._v("在~\\Scripts 目录新建 scrapyd-deploy.bat 文件，填写以下语句（目录按照真实路径进行填写）：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("@echo off \n"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"d:\\你的Python安装路径\\scripts\\python.exe"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"d:\\你的Python安装路径\\Scripts\\scrapyd-deploy"')]),s._v(" %*\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h3",{attrs:{id:"二、将某爬虫项目部署到-scrapyd-集群上后，命令运行spider成功，但scrapyd中无记录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二、将某爬虫项目部署到-scrapyd-集群上后，命令运行spider成功，但scrapyd中无记录"}},[s._v("#")]),s._v(" 二、将某爬虫项目部署到 Scrapyd 集群上后，命令运行spider成功，但scrapyd中无记录")]),s._v(" "),t("blockquote",[t("p",[s._v("问题解析： 问题还是出在 Windows 10系统上面，因为Windows 的解析方式不同，所以存在启动爬虫后解析编码问题直接将job消除，所以需要"),t("code",[s._v("pypiwin32")]),s._v("这个python库。")])]),s._v(" "),t("p",[t("em",[t("strong",[s._v("解决方案")])]),s._v("：")]),s._v(" "),t("p",[s._v("按照文章‹环境搭建›进行搭建应该不会有问题，只需要安装以下python的库：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("pip3 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" pypiwin32\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("有人好像安装"),t("code",[s._v("pywin32")]),s._v("也可以，但本人安装测试过程中是失败的。")]),s._v(" "),t("h3",{attrs:{id:"三、scrapy-scrapyd-twisted-版本协同问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#三、scrapy-scrapyd-twisted-版本协同问题"}},[s._v("#")]),s._v(" 三、Scrapy+Scrapyd+twisted 版本协同问题")]),s._v(" "),t("blockquote",[t("p",[s._v("问题解析：问题就是出在各库的版本迭代上，可能某个库升级就不支持什么什么了；本人整理一套（Windows 10 系统）如下；其它系统随意版本。")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("pip3 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("scrapyd")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.2")]),s._v(".0\npip3 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("twisted")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("18.9")]),s._v(".0\npip3 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("logparser")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.8")]),s._v(".2\npip3 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("pypiwin32")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("223")]),s._v("\npip3 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" scrapyd-client"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.2")]),s._v(".0a1\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 下载或pip安装ScrapydWeb库（建议下载源码，便于修改）")]),s._v("\npip3 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("scrapydweb")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.4")]),s._v(".0\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("h3",{attrs:{id:"四、twisted-18-9-0版本安装不成功问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#四、twisted-18-9-0版本安装不成功问题"}},[s._v("#")]),s._v(" 四、Twisted==18.9.0版本安装不成功问题")]),s._v(" "),t("ul",[t("li",[s._v("问题重现如下：")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/kachacha/markdownPicture/docImg/pip-twisted-18-9-0-error.gif",alt:"",title:"安装Twisted失败"}})]),s._v(" "),t("div",{staticClass:"language-text line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("    copying src\\twisted\\internet\\test\\fake_CAs\\thing2.pem -> build\\lib.win-amd64-3.6\\twisted\\internet\\test\\fake_CAs\n    copying src\\twisted\\mail\\test\\rfc822.message -> build\\lib.win-amd64-3.6\\twisted\\mail\\test\n    copying src\\twisted\\python\\test\\_deprecatetests.py.3only -> build\\lib.win-amd64-3.6\\twisted\\python\\test\n    copying src\\twisted\\words\\im\\instancemessenger.glade -> build\\lib.win-amd64-3.6\\twisted\\words\\im\n    copying src\\twisted\\words\\xish\\xpathparser.g -> build\\lib.win-amd64-3.6\\twisted\\words\\xish\n    running build_ext\n    building 'twisted.test.raiser' extension\n    error: Microsoft Visual C++ 14.0 is required. Get it with \"Build Tools for Visual Studio\": https://visualstudio.microsoft.com/downloads/\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("blockquote",[t("p",[s._v("问题解析：提示你安装“Microsoft Visual C++ 14.0”， 千万别傻傻的就去花几个小时去安装这个东西，最后还是用不了；其问题的本质是你系统解析不了下载下来的文件，建议你使用 Visual 去解析；但并不是它真的解析不了，而是下载下来的 "),t("code",[s._v("whl")]),s._v(" 库文件名称或版本有问题，不识别而已，所以你只需要下载一个正确的 "),t("code",[s._v("whl")]),s._v(" 文件，并安装它就好了！")])]),s._v(" "),t("p",[t("em",[t("strong",[s._v("解决方案")])]),s._v("：")]),s._v(" "),t("p",[s._v("首先去下载"),t("code",[s._v("twisted==18.9.0")]),s._v("的"),t("code",[s._v("whl")]),s._v("文件，首先你肯定会想到去"),t("a",{attrs:{href:"https://www.lfd.uci.edu/~gohlke/pythonlibs/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Unofficial Windows Binaries for Python Extension Packages"),t("OutboundLink")],1),s._v("这里下载，但可惜的是，它们已经没有此版本的"),t("code",[s._v("twisted")]),s._v("库了。")]),s._v(" "),t("p",[s._v("本人找了很久，终于找到了对应的"),t("code",[s._v("whl")]),s._v("文件，特此共享。")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://pan.baidu.com/s/1eKPQNOqHVm0f7uOQEygk9A",target:"_blank",rel:"noopener noreferrer"}},[s._v("下载地址"),t("OutboundLink")],1),s._v("-------提取码：an7s")])])}),[],!1,null,null,null);a.default=r.exports}}]);